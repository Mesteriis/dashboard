import{o,c as r,k as t,F as y,m as M,u as s,t as n,s as N,l as T,p as b,q as F}from"./vendor-DIhYXxpQ.js";import{u as k,_ as q,a as A}from"./index-BYzzAU-8.js";import{a4 as E}from"./vendor-icons-BwIvosaC.js";const I={class:"lan-table-wrap"},j={class:"lan-table"},z=["onClick"],G={key:0,class:"lan-service-links"},J=["href"],K={key:1},O={key:0},Q={__name:"LanHostsTable",setup(f){const p=k(),{lanHosts:c,lanPortsLabel:u,openLanHostModal:a}=p;return(m,d)=>(o(),r("div",I,[t("table",j,[d[2]||(d[2]=t("thead",null,[t("tr",null,[t("th",null,"IP"),t("th",null,"Имя"),t("th",null,"MAC"),t("th",null,"Вендор"),t("th",null,"Тип устройства"),t("th",null,"Открытые порты"),t("th",null,"Сервисы dashboard")])],-1)),t("tbody",null,[(o(!0),r(y,null,M(s(c),e=>{var _;return o(),r("tr",{key:e.ip,class:"lan-host-row",onClick:i=>s(a)(e)},[t("td",null,n(e.ip),1),t("td",null,n(e.hostname||"—"),1),t("td",null,n(e.mac_address||"—"),1),t("td",null,n(e.mac_vendor||"—"),1),t("td",null,n(e.device_type||"—"),1),t("td",null,n(s(u)(e)),1),t("td",null,[(_=e.dashboard_items)!=null&&_.length?(o(),r("div",G,[(o(!0),r(y,null,M(e.dashboard_items,i=>(o(),r("a",{key:i.id,class:"lan-service-link",href:i.url,target:"_blank",rel:"noopener noreferrer",onClick:d[0]||(d[0]=N(()=>{},["stop"]))},n(i.title),9,J))),128))])):(o(),r("span",K,"—"))])],8,z)}),128)),s(c).length?T("",!0):(o(),r("tr",O,[...d[1]||(d[1]=[t("td",{colspan:"7",class:"lan-empty"},"Хосты не обнаружены. Запустите сканирование вручную.",-1)])]))])])]))}},R={class:"panel lan-scan-panel"},U={key:0,class:"widget-error"},W={key:1,class:"widget-loading"},X={class:"lan-summary-grid"},Y={class:"lan-summary-card"},Z={class:"lan-summary-card"},tt={class:"lan-summary-card"},st={class:"lan-summary-card"},nt={class:"lan-summary-card"},lt={class:"lan-summary-card"},at={class:"lan-summary-card"},et={class:"subtitle lan-meta-line"},ot={class:"subtitle lan-meta-line"},rt={class:"subtitle lan-meta-line"},it={__name:"LanScanPanel",setup(f){const p=k(),{lanScanError:c,lanScanLoading:u,lanScanState:a,lanHosts:m,lanCidrsLabel:d,formatLanDuration:e,formatLanMoment:_}=p;return(i,l)=>{var h,g,$,v,S,L,w,C,x,V,B,P,D,H;return o(),r("section",R,[s(c)?(o(),r("p",U,n(s(c)),1)):s(u)&&!s(a)?(o(),r("p",W,"Загрузка состояния сканера...")):(o(),r(y,{key:2},[t("section",X,[t("article",Y,[l[0]||(l[0]=t("p",null,"Статус",-1)),t("strong",null,n((h=s(a))!=null&&h.running?"Сканирование":(g=s(a))!=null&&g.queued?"В очереди":"Ожидание"),1)]),t("article",Z,[l[1]||(l[1]=t("p",null,"Хостов найдено",-1)),t("strong",null,n(s(m).length),1)]),t("article",tt,[l[2]||(l[2]=t("p",null,"Проверено IP",-1)),t("strong",null,n(((v=($=s(a))==null?void 0:$.result)==null?void 0:v.scanned_hosts)??0),1)]),t("article",st,[l[3]||(l[3]=t("p",null,"Проверено портов",-1)),t("strong",null,n(((L=(S=s(a))==null?void 0:S.result)==null?void 0:L.scanned_ports)??0),1)]),t("article",nt,[l[4]||(l[4]=t("p",null,"Длительность",-1)),t("strong",null,n(s(e)((C=(w=s(a))==null?void 0:w.result)==null?void 0:C.duration_ms)),1)]),t("article",lt,[l[5]||(l[5]=t("p",null,"Последний старт",-1)),t("strong",null,n(s(_)((x=s(a))==null?void 0:x.last_started_at)),1)]),t("article",at,[l[6]||(l[6]=t("p",null,"Следующий запуск",-1)),t("strong",null,n(s(_)((V=s(a))==null?void 0:V.next_run_at)),1)])]),t("p",et,"Подсети: "+n(s(d)),1),t("p",ot," Планировщик: "+n(((B=s(a))==null?void 0:B.scheduler)||"asyncio")+" · интервал "+n(((P=s(a))==null?void 0:P.interval_sec)||1020)+" сек ",1),t("p",rt,"Файл результата: "+n(((H=(D=s(a))==null?void 0:D.result)==null?void 0:H.source_file)||"не создан"),1),b(Q)],64))])}}},dt={class:"hero-layout"},ct={class:"hero panel hero-title-panel"},ut={class:"hero-title-content"},_t={class:"panel hero-control-panel service-hero-controls"},pt={class:"hero-controls-content"},mt=["disabled"],yt={__name:"LanPageView",setup(f){const p=k(),{isSidebarDetailed:c,lanScanActionBusy:u,lanScanState:a,runLanScanNow:m,sidebarViewToggleTitle:d,toggleSidebarView:e}=p;return(_,i)=>{var l,h;return o(),r(y,null,[t("section",dt,[t("header",ct,[i[1]||(i[1]=t("div",{id:"hero-title-particles",class:"hero-panel-particles","aria-hidden":"true"},null,-1)),t("div",ut,[b(q)])]),t("aside",_t,[i[2]||(i[2]=t("div",{id:"hero-controls-particles",class:"hero-panel-particles","aria-hidden":"true"},null,-1)),t("div",pt,[t("button",{class:"ghost",type:"button",disabled:s(u)||!!((l=s(a))!=null&&l.running),onClick:i[0]||(i[0]=(...g)=>s(m)&&s(m)(...g))},n((h=s(a))!=null&&h.running?"Сканирование...":s(u)?"Запуск...":"Сканировать сейчас"),9,mt),b(A,{"button-class":"hero-icon-btn hero-accordion-action",active:!s(c),title:s(d),"aria-label":s(d),onClick:s(e)},{default:F(()=>[b(s(E),{class:"ui-icon hero-action-icon"})]),_:1},8,["active","title","aria-label","onClick"])])])]),b(it)],64)}}};export{yt as default};
