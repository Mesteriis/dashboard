import{e as C,b as L,d as R,w as T,I as $,o as n,i as K,q as U,k as o,t as l,u as a,p as P,c as s,F as N,m as V,y as q,n as Q,l as r,s as z,a as O}from"./vendor-D1bzbGly.js";import{_ as j}from"./BaseModal-DEo4-NpV.js";import{u as G}from"./index-DUOvSV8E.js";import{aa as H,a7 as J}from"./vendor-icons-Cq_RiAeh.js";const W={class:"command-palette-header"},X={class:"command-palette-shortcut"},Y={class:"command-palette-search"},Z=["value"],ee={key:0,class:"command-palette-list",role:"listbox","aria-label":"Быстрый поиск сервиса или команды"},te=["onMouseenter","onFocus","onClick"],ae={class:"command-palette-entry-title"},oe={key:0,class:"command-palette-entry-meta"},ne={key:1,class:"command-palette-entry-meta"},se={key:0},le={key:1},ce={key:2},ie=["onClick"],me={key:1,class:"command-palette-empty"},he={__name:"CommandPaletteModal",setup(re){var w;const b=G(),{commandPaletteActiveIndex:g,commandPaletteOpen:u,commandPaletteQuery:M,commandPaletteResults:p,activateCommandPaletteEntry:x,activateCommandPaletteSelection:D,closeCommandPalette:f,copyCommandPaletteEntryUrl:E,moveCommandPaletteSelection:h,setCommandPaletteActiveIndex:_,setCommandPaletteQuery:B}=b,i=C(null),F=/Mac|iPhone|iPad/i.test(((w=globalThis.navigator)==null?void 0:w.platform)||"")?"⌘K":"Ctrl+K",y=C(document.documentElement.dataset.fxMode||"full");function k(){y.value=document.documentElement.dataset.fxMode||"full"}function v(){const t=()=>{i.value&&(i.value.focus(),i.value.select())};O(()=>{t(),window.requestAnimationFrame(()=>{t()})})}function I(t){if(t.key==="ArrowDown"){t.preventDefault(),h(1);return}if(t.key==="ArrowUp"){t.preventDefault(),h(-1);return}if(t.key==="Enter"){t.preventDefault(),D();return}t.key==="Escape"&&(t.preventDefault(),f())}function S(t){return y.value==="off"?{initial:{opacity:1,y:0,scale:1},enter:{opacity:1,y:0,scale:1,transition:{duration:0}}}:{initial:{opacity:0,y:8,scale:.985},enter:{opacity:1,y:0,scale:1,transition:{duration:220,delay:Math.min(t,10)*24}}}}return L(()=>{window.addEventListener("oko:fx-mode-change",k),u.value&&v()}),R(()=>{window.removeEventListener("oko:fx-mode-change",k)}),T(()=>u.value,t=>{t&&v()},{flush:"post"}),(t,c)=>{const A=$("motion");return n(),K(j,{open:a(u),"backdrop-class":"command-palette-backdrop","modal-class":"command-palette-modal",onBackdrop:a(f)},{default:U(()=>[o("header",W,[c[1]||(c[1]=o("div",null,[o("h3",null,"Быстрый поиск"),o("p",null,"Сервисы и команды: имя, IP, tag, site")],-1)),o("span",X,l(a(F)),1)]),o("div",Y,[P(a(H),{class:"ui-icon command-palette-search-icon"}),o("input",{ref_key:"inputRef",ref:i,class:"command-palette-input",type:"text",autocomplete:"off",spellcheck:"false",placeholder:"Поиск сервиса или команды",value:a(M),onInput:c[0]||(c[0]=e=>a(B)(e.target.value)),onKeydown:I},null,40,Z)]),a(p).length?(n(),s("ul",ee,[(n(!0),s(N,null,V(a(p),(e,m)=>q((n(),s("li",{key:e.id,class:"command-palette-row"},[o("button",{class:Q(["command-palette-entry",{active:m===a(g),"is-action":e.type==="action"}]),type:"button",onMouseenter:d=>a(_)(m),onFocus:d=>a(_)(m),onClick:d=>a(x)(e)},[o("span",ae,l(e.title),1),e.type==="action"?(n(),s("span",oe,[c[2]||(c[2]=o("span",null,"Команда",-1)),o("span",null,l(e.subgroupTitle),1)])):(n(),s("span",ne,[o("span",null,l(e.groupTitle)+" / "+l(e.subgroupTitle),1),e.host?(n(),s("span",se,l(e.host),1)):r("",!0),e.ip?(n(),s("span",le,l(e.ip),1)):r("",!0),e.site?(n(),s("span",ce,"site: "+l(e.site),1)):r("",!0)]))],42,te),e.type==="item"?(n(),s("button",{key:0,class:"ghost command-palette-copy",type:"button",title:"Скопировать URL",onClick:z(d=>a(E)(e),["stop"])},[P(a(J),{class:"ui-icon"})],8,ie)):r("",!0)])),[[A,S(m)]])),128))])):(n(),s("p",me,"Совпадений нет"))]),_:1},8,["open","onBackdrop"])}}};export{he as default};
