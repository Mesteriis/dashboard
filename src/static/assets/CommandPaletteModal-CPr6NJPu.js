import{e as C,b as L,d as R,w as T,J as $,o as n,i as K,q as U,k as a,t as l,u as o,p as P,c as s,F as N,m as V,y as q,n as Q,l as r,s as z,a as J}from"./vendor-6RIulmtG.js";import{_ as O}from"./BaseModal--NxFBXOw.js";import{u as j}from"./index-CocsHwJo.js";import{ae as G,a7 as H}from"./vendor-icons-DGPNVUz1.js";const W={class:"command-palette-header"},X={class:"command-palette-shortcut"},Y={class:"command-palette-search"},Z=["value"],ee={key:0,class:"command-palette-list",role:"listbox","aria-label":"Быстрый поиск сервиса или команды"},te=["onMouseenter","onFocus","onClick"],oe={class:"command-palette-entry-title"},ae={key:0,class:"command-palette-entry-meta"},ne={key:1,class:"command-palette-entry-meta"},se={key:0},le={key:1},ce={key:2},ie=["onClick"],me={key:1,class:"command-palette-empty"},he={__name:"CommandPaletteModal",setup(re){var w;const b=j(),{commandPaletteActiveIndex:g,commandPaletteOpen:u,commandPaletteQuery:M,commandPaletteResults:p,activateCommandPaletteEntry:x,activateCommandPaletteSelection:D,closeCommandPalette:f,copyCommandPaletteEntryUrl:E,moveCommandPaletteSelection:h,setCommandPaletteActiveIndex:_,setCommandPaletteQuery:B}=b,i=C(null),F=/Mac|iPhone|iPad/i.test(((w=globalThis.navigator)==null?void 0:w.platform)||"")?"⌘K":"Ctrl+K",y=C(document.documentElement.dataset.fxMode||"full");function k(){y.value=document.documentElement.dataset.fxMode||"full"}function v(){const t=()=>{i.value&&(i.value.focus(),i.value.select())};J(()=>{t(),window.requestAnimationFrame(()=>{t()})})}function I(t){if(t.key==="ArrowDown"){t.preventDefault(),h(1);return}if(t.key==="ArrowUp"){t.preventDefault(),h(-1);return}if(t.key==="Enter"){t.preventDefault(),D();return}t.key==="Escape"&&(t.preventDefault(),f())}function S(t){return y.value==="off"?{initial:{opacity:1,y:0,scale:1},enter:{opacity:1,y:0,scale:1,transition:{duration:0}}}:{initial:{opacity:0,y:8,scale:.985},enter:{opacity:1,y:0,scale:1,transition:{duration:220,delay:Math.min(t,10)*24}}}}return L(()=>{window.addEventListener("oko:fx-mode-change",k),u.value&&v()}),R(()=>{window.removeEventListener("oko:fx-mode-change",k)}),T(()=>u.value,t=>{t&&v()},{flush:"post"}),(t,c)=>{const A=$("motion");return n(),K(O,{open:o(u),"backdrop-class":"command-palette-backdrop","modal-class":"command-palette-modal",onBackdrop:o(f)},{default:U(()=>[a("header",W,[c[1]||(c[1]=a("div",null,[a("h3",null,"Быстрый поиск"),a("p",null,"Сервисы и команды: имя, IP, tag, site")],-1)),a("span",X,l(o(F)),1)]),a("div",Y,[P(o(G),{class:"ui-icon command-palette-search-icon"}),a("input",{ref_key:"inputRef",ref:i,class:"command-palette-input",type:"text",autocomplete:"off",spellcheck:"false",placeholder:"Поиск сервиса или команды",value:o(M),onInput:c[0]||(c[0]=e=>o(B)(e.target.value)),onKeydown:I},null,40,Z)]),o(p).length?(n(),s("ul",ee,[(n(!0),s(N,null,V(o(p),(e,m)=>q((n(),s("li",{key:e.id,class:"command-palette-row"},[a("button",{class:Q(["command-palette-entry",{active:m===o(g),"is-action":e.type==="action"}]),type:"button",onMouseenter:d=>o(_)(m),onFocus:d=>o(_)(m),onClick:d=>o(x)(e)},[a("span",oe,l(e.title),1),e.type==="action"?(n(),s("span",ae,[c[2]||(c[2]=a("span",null,"Команда",-1)),a("span",null,l(e.subgroupTitle),1)])):(n(),s("span",ne,[a("span",null,l(e.groupTitle)+" / "+l(e.subgroupTitle),1),e.host?(n(),s("span",se,l(e.host),1)):r("",!0),e.ip?(n(),s("span",le,l(e.ip),1)):r("",!0),e.site?(n(),s("span",ce,"site: "+l(e.site),1)):r("",!0)]))],42,te),e.type==="item"?(n(),s("button",{key:0,class:"ghost command-palette-copy",type:"button",title:"Скопировать URL",onClick:z(d=>o(E)(e),["stop"])},[P(o(H),{class:"ui-icon"})],8,ie)):r("",!0)])),[[A,S(m)]])),128))])):(n(),s("p",me,"Совпадений нет"))]),_:1},8,["open","onBackdrop"])}}};export{he as default};
