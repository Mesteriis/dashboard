import{e as C,b as R,d as S,w as $,a as A,J as K,o as n,i as T,q as U,k as o,t as l,u as t,p as P,c,F as N,m as V,y as Q,n as q,l as u,s as z}from"./vendor-D7XMpWz6.js";import{_ as J}from"./BaseModal-CiiZpxOD.js";import{u as O}from"./index-DxoSPUSE.js";import{ad as j,a7 as G}from"./vendor-icons-DmI2hM_M.js";const H={class:"command-palette-header"},W={class:"command-palette-shortcut"},X={class:"command-palette-search"},Y=["value"],Z={key:0,class:"command-palette-list",role:"listbox","aria-label":"Быстрый поиск сервиса"},ee=["onMouseenter","onFocus","onClick"],te={class:"command-palette-entry-title"},ae={class:"command-palette-entry-meta"},oe={key:0},ne={key:1},se={key:2},le=["onClick"],ce={key:1,class:"command-palette-empty"},pe={__name:"CommandPaletteModal",setup(ie){var w;const b=O(),{commandPaletteActiveIndex:g,commandPaletteOpen:p,commandPaletteQuery:M,commandPaletteResults:f,activateCommandPaletteEntry:x,activateCommandPaletteSelection:D,closeCommandPalette:_,copyCommandPaletteEntryUrl:E,moveCommandPaletteSelection:h,setCommandPaletteActiveIndex:y,setCommandPaletteQuery:B}=b,m=C(null),F=/Mac|iPhone|iPad/i.test(((w=globalThis.navigator)==null?void 0:w.platform)||"")?"⌘K":"Ctrl+K",k=C(document.documentElement.dataset.fxMode||"full");function v(){k.value=document.documentElement.dataset.fxMode||"full"}function I(a){if(a.key==="ArrowDown"){a.preventDefault(),h(1);return}if(a.key==="ArrowUp"){a.preventDefault(),h(-1);return}if(a.key==="Enter"){a.preventDefault(),D();return}a.key==="Escape"&&(a.preventDefault(),_())}function L(a){return k.value==="off"?{initial:{opacity:1,y:0,scale:1},enter:{opacity:1,y:0,scale:1,transition:{duration:0}}}:{initial:{opacity:0,y:8,scale:.985},enter:{opacity:1,y:0,scale:1,transition:{duration:220,delay:Math.min(a,10)*24}}}}return R(()=>{window.addEventListener("oko:fx-mode-change",v)}),S(()=>{window.removeEventListener("oko:fx-mode-change",v)}),$(()=>p.value,async a=>{var s,i;a&&(await A(),(s=m.value)==null||s.focus(),(i=m.value)==null||i.select())}),(a,s)=>{const i=K("motion");return n(),T(J,{open:t(p),"backdrop-class":"command-palette-backdrop","modal-class":"command-palette-modal",onBackdrop:t(_)},{default:U(()=>[o("header",H,[s[1]||(s[1]=o("div",null,[o("h3",null,"Быстрый поиск"),o("p",null,"Имя, IP, tag, site")],-1)),o("span",W,l(t(F)),1)]),o("div",X,[P(t(j),{class:"ui-icon command-palette-search-icon"}),o("input",{ref_key:"inputRef",ref:m,class:"command-palette-input",type:"text",autocomplete:"off",spellcheck:"false",placeholder:"Поиск сервиса",value:t(M),onInput:s[0]||(s[0]=e=>t(B)(e.target.value)),onKeydown:I},null,40,Y)]),t(f).length?(n(),c("ul",Z,[(n(!0),c(N,null,V(t(f),(e,r)=>Q((n(),c("li",{key:e.id,class:"command-palette-row"},[o("button",{class:q(["command-palette-entry",{active:r===t(g)}]),type:"button",onMouseenter:d=>t(y)(r),onFocus:d=>t(y)(r),onClick:d=>t(x)(e)},[o("span",te,l(e.title),1),o("span",ae,[o("span",null,l(e.groupTitle)+" / "+l(e.subgroupTitle),1),e.host?(n(),c("span",oe,l(e.host),1)):u("",!0),e.ip?(n(),c("span",ne,l(e.ip),1)):u("",!0),e.site?(n(),c("span",se,"site: "+l(e.site),1)):u("",!0)])],42,ee),o("button",{class:"ghost command-palette-copy",type:"button",title:"Скопировать URL",onClick:z(d=>t(E)(e),["stop"])},[P(t(G),{class:"ui-icon"})],8,le)])),[[i,L(r)]])),128))])):(n(),c("p",ce,"Совпадений нет"))]),_:1},8,["open","onBackdrop"])}}};export{pe as default};
