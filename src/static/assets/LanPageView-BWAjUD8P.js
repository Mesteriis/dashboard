import{o,c as r,k as t,F as k,m as N,u as n,t as l,s as A,l as q,p as u,q as T}from"./vendor-D1bzbGly.js";import{u as f,_ as E,a as F}from"./index-BGJOAaeW.js";import{ab as I,a4 as z}from"./vendor-icons-BtRhSBC4.js";const j={class:"lan-table-wrap"},G={class:"lan-table"},J=["onClick"],K={key:0,class:"lan-service-links"},O=["href"],Q={key:1},R={key:0},U={__name:"LanHostsTable",setup($){const m=f(),{lanHosts:d,lanPortsLabel:_,openLanHostModal:a}=m;return(g,i)=>(o(),r("div",j,[t("table",G,[i[2]||(i[2]=t("thead",null,[t("tr",null,[t("th",null,"IP"),t("th",null,"Имя"),t("th",null,"MAC"),t("th",null,"Вендор"),t("th",null,"Тип устройства"),t("th",null,"Открытые порты"),t("th",null,"Сервисы dashboard")])],-1)),t("tbody",null,[(o(!0),r(k,null,N(n(d),e=>{var c;return o(),r("tr",{key:e.ip,class:"lan-host-row",onClick:p=>n(a)(e)},[t("td",null,l(e.ip),1),t("td",null,l(e.hostname||"—"),1),t("td",null,l(e.mac_address||"—"),1),t("td",null,l(e.mac_vendor||"—"),1),t("td",null,l(e.device_type||"—"),1),t("td",null,l(n(_)(e)),1),t("td",null,[(c=e.dashboard_items)!=null&&c.length?(o(),r("div",K,[(o(!0),r(k,null,N(e.dashboard_items,p=>(o(),r("a",{key:p.id,class:"lan-service-link",href:p.url,target:"_blank",rel:"noopener noreferrer",onClick:i[0]||(i[0]=A(()=>{},["stop"]))},l(p.title),9,O))),128))])):(o(),r("span",Q,"—"))])],8,J)}),128)),n(d).length?q("",!0):(o(),r("tr",R,[...i[1]||(i[1]=[t("td",{colspan:"7",class:"lan-empty"},"Хосты не обнаружены. Запустите сканирование вручную.",-1)])]))])])]))}},W={class:"panel lan-scan-panel"},X={key:0,class:"widget-error"},Y={key:1,class:"widget-loading"},Z={class:"lan-summary-grid"},tt={class:"lan-summary-card"},nt={class:"lan-summary-card"},st={class:"lan-summary-card"},lt={class:"lan-summary-card"},at={class:"lan-summary-card"},et={class:"lan-summary-card"},ot={class:"lan-summary-card"},rt={class:"subtitle lan-meta-line"},it={class:"subtitle lan-meta-line"},dt={class:"subtitle lan-meta-line"},ct={key:0,class:"widget-error"},ut={__name:"LanScanPanel",setup($){const m=f(),{lanScanError:d,lanScanLoading:_,lanScanState:a,lanHosts:g,lanCidrsLabel:i,formatLanDuration:e,formatLanMoment:c}=m;return(p,s)=>{var h,b,y,S,v,C,w,L,x,P,V,B,H,D,M;return o(),r("section",W,[n(d)?(o(),r("p",X,l(n(d)),1)):n(_)&&!n(a)?(o(),r("p",Y,"Загрузка состояния сканера...")):(o(),r(k,{key:2},[t("section",Z,[t("article",tt,[s[0]||(s[0]=t("p",null,"Статус",-1)),t("strong",null,l((h=n(a))!=null&&h.running?"Сканирование":(b=n(a))!=null&&b.queued?"В очереди":"Ожидание"),1)]),t("article",nt,[s[1]||(s[1]=t("p",null,"Хостов найдено",-1)),t("strong",null,l(n(g).length),1)]),t("article",st,[s[2]||(s[2]=t("p",null,"Проверено IP",-1)),t("strong",null,l(((S=(y=n(a))==null?void 0:y.result)==null?void 0:S.scanned_hosts)??0),1)]),t("article",lt,[s[3]||(s[3]=t("p",null,"Проверено портов",-1)),t("strong",null,l(((C=(v=n(a))==null?void 0:v.result)==null?void 0:C.scanned_ports)??0),1)]),t("article",at,[s[4]||(s[4]=t("p",null,"Длительность",-1)),t("strong",null,l(n(e)((L=(w=n(a))==null?void 0:w.result)==null?void 0:L.duration_ms)),1)]),t("article",et,[s[5]||(s[5]=t("p",null,"Последний старт",-1)),t("strong",null,l(n(c)((x=n(a))==null?void 0:x.last_started_at)),1)]),t("article",ot,[s[6]||(s[6]=t("p",null,"Следующий запуск",-1)),t("strong",null,l(n(c)((P=n(a))==null?void 0:P.next_run_at)),1)])]),t("p",rt,"Подсети: "+l(n(i)),1),t("p",it," Планировщик: "+l(((V=n(a))==null?void 0:V.scheduler)||"asyncio")+" · интервал "+l(((B=n(a))==null?void 0:B.interval_sec)||1020)+" сек ",1),t("p",dt,"Файл результата: "+l(((D=(H=n(a))==null?void 0:H.result)==null?void 0:D.source_file)||"не создан"),1),(M=n(a))!=null&&M.last_error?(o(),r("p",ct,"Ошибка сканирования: "+l(n(a).last_error),1)):q("",!0),u(U)],64))])}}},_t={class:"hero-layout"},pt={class:"hero panel hero-title-panel"},mt={class:"hero-title-content"},ht={class:"panel hero-control-panel service-hero-controls"},bt={class:"hero-controls-content"},gt=["disabled"],$t={__name:"LanPageView",setup($){const m=f(),{isSidebarDetailed:d,lanScanActionBusy:_,lanScanState:a,openSettingsPanel:g,runLanScanNow:i,sidebarViewToggleTitle:e,toggleSidebarView:c}=m;return(p,s)=>{var h,b;return o(),r(k,null,[t("section",_t,[t("header",pt,[s[1]||(s[1]=t("div",{id:"hero-title-particles",class:"hero-panel-particles","aria-hidden":"true"},null,-1)),t("div",mt,[u(E)])]),t("aside",ht,[s[2]||(s[2]=t("div",{id:"hero-controls-particles",class:"hero-panel-particles","aria-hidden":"true"},null,-1)),t("div",bt,[t("button",{class:"ghost",type:"button",disabled:n(_)||!!((h=n(a))!=null&&h.running),onClick:s[0]||(s[0]=(...y)=>n(i)&&n(i)(...y))},l((b=n(a))!=null&&b.running?"Сканирование...":n(_)?"Запуск...":"Сканировать сейчас"),9,gt),u(F,{"button-class":"hero-icon-btn hero-accordion-action",title:"Панель настроек","aria-label":"Открыть панель настроек",onClick:n(g)},{default:T(()=>[u(n(I),{class:"ui-icon hero-action-icon"})]),_:1},8,["onClick"]),u(F,{"button-class":"hero-icon-btn hero-accordion-action",active:!n(d),title:n(e),"aria-label":n(e),onClick:n(c)},{default:T(()=>[u(n(z),{class:"ui-icon hero-action-icon"})]),_:1},8,["active","title","aria-label","onClick"])])])]),u(ut)],64)}}};export{$t as default};
