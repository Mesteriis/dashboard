@use "../abstracts/breakpoints" as bp;

.pleiad-overlay-backdrop {
  position: fixed;
  inset: 0;
  z-index: 58;
  padding: 0;
  background: rgba(3, 9, 16, 0.72);
  backdrop-filter: blur(6px) saturate(116%);
}

.pleiad-root {
  --pleiad-btn-size: 34px;
  position: relative;
  z-index: 1;
  width: 100%;
  min-height: 100vh;
  height: 100vh;
  padding: var(--desktop-drag-strip) 0 0;
  overflow: hidden;
  color: var(--text);
  background-color: var(--bg);
  background-image:
    radial-gradient(
      circle at 62% -4%,
      rgba(46, 157, 168, 0.14),
      transparent 30%
    ),
    radial-gradient(
      circle at 18% 10%,
      rgba(26, 140, 131, 0.22),
      transparent 38%
    ),
    radial-gradient(circle at 82% 84%, rgba(18, 96, 98, 0.2), transparent 42%),
    linear-gradient(168deg, #02060d 0%, #05131c 40%, #062118 74%, #030c14 100%);
}

.pleiad-root.pleiad-root--screensaver {
  min-height: 100%;
  height: 100%;
  padding: 0;
  border: 0;
  border-radius: 0;
  box-shadow: none;
}

.pleiad-layout {
  height: calc(100vh - var(--desktop-drag-strip));
}

.pleiad-root.pleiad-root--screensaver .pleiad-layout {
  height: 100%;
}

.pleiad-canvas-panel {
  position: relative;
  min-height: 0;
  height: 100%;
  border: 0;
  border-radius: 0;
  background: transparent;
  overflow: hidden;
}

.pleiad-canvas-host,
.pleiad-canvas {
  width: 100%;
  height: 100%;
  display: block;
}

.pleiad-avatar-layer {
  position: absolute;
  inset: 0;
  z-index: 6;
  pointer-events: none;
  overflow: hidden;
}

.pleiad-avatar-node {
  position: absolute;
  pointer-events: none;
  will-change: transform, opacity;
  transition:
    opacity 220ms ease,
    filter 220ms ease,
    transform 220ms ease;
}

.pleiad-avatar-node.is-dimmed {
  filter: saturate(0.62) brightness(0.72);
}

.pleiad-avatar-node .agent-three-sphere {
  width: 100%;
  height: 100%;
  border: 0;
  box-shadow: none;
  background: transparent;
}

.pleiad-avatar-node .agent-three-sphere-status {
  display: none;
}

.pleiad-top-actions {
  position: absolute;
  z-index: 9;
  top: calc(10px + var(--desktop-drag-strip));
  right: 10px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.pleiad-icon-btn {
  width: var(--pleiad-btn-size);
  height: var(--pleiad-btn-size);
  padding: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.pleiad-action-icon {
  width: 15px;
  height: 15px;
}

.pleiad-pin-banner {
  position: absolute;
  z-index: 8;
  top: calc(10px + var(--desktop-drag-strip));
  left: 10px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 7px 9px;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: linear-gradient(162deg, var(--surface-strong), var(--surface));
  box-shadow: 0 10px 24px rgba(1, 10, 18, 0.3);
  backdrop-filter: blur(9px) saturate(118%);
}

.pleiad-pin-label {
  margin: 0;
  font-size: 0.8rem;
  color: var(--muted);
}

.pleiad-clear-pin {
  padding: 5px 10px;
}

.pleiad-feed-toggle {
  position: absolute;
  z-index: 10;
  right: 10px;
  bottom: 10px;
  width: var(--pleiad-btn-size);
  height: var(--pleiad-btn-size);
  border-radius: 10px;
  border: 1px solid rgba(110, 242, 220, 0.38);
  background: rgba(18, 51, 56, 0.26);
  color: #d8fff7;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition:
    border-color 150ms ease,
    background 150ms ease;
}

.pleiad-feed-toggle:hover {
  border-color: rgba(120, 248, 226, 0.56);
  background: rgba(31, 98, 101, 0.4);
}

.pleiad-feed-toggle.active {
  border-color: rgba(120, 248, 226, 0.68);
  background: rgba(25, 96, 95, 0.46);
}

.pleiad-feed-toggle-icon {
  width: 15px;
  height: 15px;
}

.pleiad-feed-panel {
  position: absolute;
  z-index: 7;
  top: calc(62px + var(--desktop-drag-strip));
  right: 10px;
  bottom: 70px;
  width: min(380px, calc(100% - 20px));
  min-height: 0;
  border: 1px solid var(--border);
  border-radius: calc(var(--card-radius) - 2px);
  background: linear-gradient(162deg, var(--surface-strong), var(--surface));
  box-shadow: var(--shadow);
  backdrop-filter: blur(12px) saturate(122%);
  display: grid;
  grid-template-rows: auto minmax(0, 1fr);
  overflow: hidden;
  transform: translateX(120%);
  opacity: 0;
  pointer-events: none;
  transition:
    transform 220ms ease,
    opacity 220ms ease;
}

.pleiad-feed-panel.open {
  transform: translateX(0);
  opacity: 1;
  pointer-events: auto;
}

.pleiad-feed-head {
  padding: 11px 12px;
  border-bottom: 1px solid var(--border);
  display: grid;
  gap: 8px;
}

.pleiad-feed-head-top {
  display: flex;
  justify-content: space-between;
  gap: 8px;
  align-items: baseline;
}

.pleiad-feed-head h3 {
  margin: 0;
  font-size: 0.92rem;
}

.pleiad-feed-head p {
  margin: 0;
  color: var(--muted);
  font-size: 0.76rem;
}

.pleiad-feed-head-actions {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.pleiad-feed-close {
  width: var(--pleiad-btn-size);
  height: var(--pleiad-btn-size);
  border: 1px solid rgba(110, 242, 220, 0.38);
  border-radius: 10px;
  background: rgba(18, 51, 56, 0.26);
  color: #d8fff7;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition:
    border-color 150ms ease,
    background 150ms ease;
}

.pleiad-feed-close:hover {
  border-color: rgba(120, 248, 226, 0.56);
  background: rgba(31, 98, 101, 0.4);
}

.pleiad-feed-close .ui-icon {
  width: 15px;
  height: 15px;
}

.pleiad-filter-group {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.pleiad-kind-chip {
  width: var(--pleiad-btn-size);
  height: var(--pleiad-btn-size);
  border: 1px solid rgba(140, 173, 192, 0.3);
  border-radius: 999px;
  background: rgba(8, 19, 31, 0.5);
  color: var(--muted);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition:
    border-color 140ms ease,
    background 140ms ease,
    color 140ms ease;
}

.pleiad-kind-chip:hover {
  border-color: rgba(156, 190, 208, 0.48);
  background: rgba(9, 24, 36, 0.68);
}

.pleiad-kind-chip.active {
  border-color: rgba(110, 242, 220, 0.66);
  background: rgba(25, 96, 95, 0.44);
  color: #e6fff8;
}

.pleiad-kind-chip.kind-all {
  color: #c4d4e2;
}

.pleiad-kind-chip.kind-action {
  color: #97d9cc;
}

.pleiad-kind-chip.kind-action.active {
  border-color: rgba(81, 231, 183, 0.72);
  background: rgba(28, 112, 101, 0.52);
}

.pleiad-kind-chip.kind-warning {
  color: #ffd3a4;
}

.pleiad-kind-chip.kind-warning.active {
  border-color: rgba(255, 191, 108, 0.74);
  background: rgba(130, 89, 42, 0.54);
}

.pleiad-kind-chip.kind-memory {
  color: #c3b9de;
}

.pleiad-kind-chip.kind-memory.active {
  border-color: rgba(166, 186, 204, 0.74);
  background: rgba(79, 66, 112, 0.54);
}

.pleiad-kind-chip.kind-info {
  color: #9fcfe8;
}

.pleiad-kind-chip.kind-info.active {
  border-color: rgba(110, 208, 242, 0.74);
  background: rgba(43, 80, 116, 0.54);
}

.pleiad-kind-icon {
  width: 15px;
  height: 15px;
}

.pleiad-feed-list {
  min-height: 0;
  overflow-y: auto;
  padding: 8px;
  display: grid;
  align-content: start;
  gap: 8px;
}

.pleiad-event-item {
  border: 1px solid rgba(129, 166, 184, 0.2);
  border-radius: 12px;
  padding: 9px;
  text-align: left;
  background: rgba(8, 18, 29, 0.55);
  color: #d5e4f1;
  cursor: pointer;
  transition:
    border-color 140ms ease,
    background 140ms ease,
    box-shadow 180ms ease;
}

.pleiad-event-item:hover {
  border-color: rgba(156, 190, 208, 0.32);
  background: rgba(8, 19, 31, 0.66);
}

.pleiad-event-item.active {
  border-color: rgba(116, 248, 225, 0.56);
  box-shadow:
    0 10px 22px rgba(2, 18, 30, 0.32),
    0 0 0 1px rgba(121, 252, 231, 0.14);
  background: rgba(10, 28, 36, 0.78);
}

.pleiad-event-item.kind-warning {
  border-left-color: rgba(255, 191, 108, 0.64);
}

.pleiad-event-item.kind-action {
  border-left-color: rgba(81, 231, 183, 0.56);
}

.pleiad-event-item.kind-memory {
  border-left-color: rgba(166, 186, 204, 0.62);
}

.pleiad-event-item.kind-info {
  border-left-color: rgba(110, 208, 242, 0.56);
}

.pleiad-event-line {
  display: flex;
  justify-content: space-between;
  gap: 8px;
  align-items: center;
}

.pleiad-route {
  font-size: 0.78rem;
  letter-spacing: 0.04em;
  color: #d5e4f1;
}

.pleiad-kind {
  font-size: 0.66rem;
  letter-spacing: 0.07em;
  text-transform: uppercase;
  color: var(--muted);
}

.pleiad-summary {
  margin: 7px 0 0;
  font-size: 0.79rem;
  line-height: 1.4;
  color: #d5e4f1;
}

.pleiad-event-meta {
  margin-top: 8px;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  font-size: 0.67rem;
  color: var(--muted);
}

.pleiad-feed-empty {
  margin: 10px 4px;
  color: var(--muted);
  font-size: 0.8rem;
}

.pleiad-tooltip {
  position: fixed;
  z-index: 66;
  display: grid;
  gap: 2px;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: linear-gradient(162deg, var(--surface-strong), var(--surface));
  pointer-events: none;
  box-shadow: 0 16px 34px rgba(0, 0, 0, 0.5);
}

.pleiad-tooltip strong {
  font-size: 0.77rem;
  letter-spacing: 0.06em;
}

.pleiad-tooltip span {
  font-size: 0.73rem;
  color: var(--muted);
}

.pleiad-tooltip small {
  margin-top: 2px;
  font-size: 0.64rem;
  color: var(--muted);
}

.pleiad-root.pleiad-root--screensaver .pleiad-top-actions {
  top: 10px;
  right: 10px;
}

.pleiad-root.pleiad-root--screensaver .pleiad-pin-banner {
  top: 10px;
  left: 10px;
}

.pleiad-root.pleiad-root--screensaver .pleiad-feed-panel {
  top: 62px;
  right: 10px;
  bottom: 70px;
}

.pleiad-root.pleiad-root--screensaver .pleiad-feed-toggle {
  right: 10px;
  bottom: 10px;
}

@include bp.down(bp.$bp-lg) {
  .pleiad-feed-panel {
    width: min(360px, calc(100% - 20px));
  }
}

@include bp.down(bp.$bp-sm) {
  .pleiad-root {
    padding-top: 0;
    height: 100dvh;
  }

  .pleiad-layout {
    height: 100dvh;
  }

  .pleiad-top-actions {
    top: 10px;
    right: 10px;
  }

  .pleiad-pin-banner {
    top: 10px;
    left: 10px;
    max-width: calc(100% - 132px);
  }

  .pleiad-feed-panel {
    top: auto;
    right: 10px;
    left: 10px;
    bottom: 64px;
    width: auto;
    max-height: min(56vh, 420px);
    transform: translateY(110%);
    border-radius: 12px;
  }

  .pleiad-feed-panel.open {
    transform: translateY(0);
  }

  .pleiad-feed-toggle {
    right: 10px;
    bottom: 10px;
  }
}
