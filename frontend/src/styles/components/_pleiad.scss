@use "../abstracts/breakpoints" as bp;

.pleiad-overlay-backdrop {
  position: fixed;
  inset: 0;
  z-index: 58;
  padding: 0;
  background: var(--pleiad-color-001);
  backdrop-filter: blur(6px) saturate(116%);
}

.pleiad-root {
  --pleiad-btn-size: 34px;
  position: relative;
  z-index: 1;
  width: 100%;
  min-height: 100vh;
  height: 100vh;
  padding: var(--desktop-drag-strip) 0 0;
  overflow: hidden;
  color: var(--text);
  background-color: var(--bg);
  background-image:
    radial-gradient(
      circle at 62% -4%,
      var(--pleiad-color-002),
      transparent 30%
    ),
    radial-gradient(
      circle at 18% 10%,
      var(--pleiad-color-003),
      transparent 38%
    ),
    radial-gradient(circle at 82% 84%, var(--pleiad-color-004), transparent 42%),
    linear-gradient(168deg, var(--pleiad-color-005) 0%, var(--pleiad-color-006) 40%, var(--pleiad-color-007) 74%, var(--pleiad-color-008) 100%);
}

.pleiad-root.pleiad-root--screensaver {
  min-height: 100%;
  height: 100%;
  padding: 0;
  border: 0;
  border-radius: 0;
  box-shadow: none;
}

.pleiad-layout {
  height: calc(100vh - var(--desktop-drag-strip));
}

.pleiad-root.pleiad-root--screensaver .pleiad-layout {
  height: 100%;
}

.pleiad-canvas-panel {
  position: relative;
  min-height: 0;
  height: 100%;
  border: 0;
  border-radius: 0;
  background: transparent;
  overflow: hidden;
}

.pleiad-canvas-host,
.pleiad-canvas {
  width: 100%;
  height: 100%;
  display: block;
}

.pleiad-avatar-layer {
  position: absolute;
  inset: 0;
  z-index: 6;
  pointer-events: none;
  overflow: hidden;
}

.pleiad-avatar-node {
  position: absolute;
  pointer-events: none;
  will-change: transform, opacity;
  transition:
    opacity 220ms ease,
    filter 220ms ease,
    transform 220ms ease;
}

.pleiad-avatar-node.is-dimmed {
  filter: saturate(0.62) brightness(0.72);
}

.pleiad-avatar-node .agent-three-sphere {
  width: 100%;
  height: 100%;
  border: 0;
  box-shadow: none;
  background: transparent;
}

.pleiad-avatar-node .agent-three-sphere-status {
  display: none;
}

.pleiad-top-actions {
  position: absolute;
  z-index: 9;
  top: calc(10px + var(--desktop-drag-strip));
  right: 10px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.pleiad-icon-btn {
  width: var(--pleiad-btn-size);
  height: var(--pleiad-btn-size);
  padding: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.pleiad-action-icon {
  width: 15px;
  height: 15px;
}

.pleiad-pin-banner {
  position: absolute;
  z-index: 8;
  top: calc(10px + var(--desktop-drag-strip));
  left: 10px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 7px 9px;
  border: 1px solid var(--border);
  border-radius: var(--ui-radius);
  background: linear-gradient(162deg, var(--surface-strong), var(--surface));
  box-shadow: 0 10px 24px var(--pleiad-color-009);
  backdrop-filter: blur(9px) saturate(118%);
}

.pleiad-pin-label {
  margin: 0;
  font-size: 0.8rem;
  color: var(--muted);
}

.pleiad-clear-pin {
  padding: 5px 10px;
}

.pleiad-feed-toggle {
  position: absolute;
  z-index: 10;
  right: 10px;
  bottom: 10px;
  width: var(--pleiad-btn-size);
  height: var(--pleiad-btn-size);
  border-radius: var(--ui-radius);
  border: 1px solid var(--pleiad-color-010);
  background: var(--pleiad-color-011);
  color: var(--pleiad-color-012);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition:
    border-color 150ms ease,
    background 150ms ease;
}

.pleiad-feed-toggle:hover {
  border-color: var(--pleiad-color-013);
  background: var(--pleiad-color-014);
}

.pleiad-feed-toggle.active {
  border-color: var(--pleiad-color-015);
  background: var(--pleiad-color-016);
}

.pleiad-feed-toggle-icon {
  width: 15px;
  height: 15px;
}

.pleiad-feed-panel {
  position: absolute;
  z-index: 7;
  top: calc(62px + var(--desktop-drag-strip));
  right: 10px;
  bottom: 70px;
  width: min(380px, calc(100% - 20px));
  min-height: 0;
  border: 1px solid var(--border);
  border-radius: var(--ui-radius);
  background: linear-gradient(162deg, var(--surface-strong), var(--surface));
  box-shadow: var(--shadow);
  backdrop-filter: blur(12px) saturate(122%);
  display: grid;
  grid-template-rows: auto minmax(0, 1fr);
  overflow: hidden;
  transform: translateX(120%);
  opacity: 0;
  pointer-events: none;
  transition:
    transform 220ms ease,
    opacity 220ms ease;
}

.pleiad-feed-panel.open {
  transform: translateX(0);
  opacity: 1;
  pointer-events: auto;
}

.pleiad-feed-head {
  padding: 11px 12px;
  border-bottom: 1px solid var(--border);
  display: grid;
  gap: 8px;
}

.pleiad-feed-head-top {
  display: flex;
  justify-content: space-between;
  gap: 8px;
  align-items: baseline;
}

.pleiad-feed-head h3 {
  margin: 0;
  font-size: 0.92rem;
}

.pleiad-feed-head p {
  margin: 0;
  color: var(--muted);
  font-size: 0.76rem;
}

.pleiad-feed-head-actions {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.pleiad-feed-close {
  width: var(--pleiad-btn-size);
  height: var(--pleiad-btn-size);
  border: 1px solid var(--pleiad-color-010);
  border-radius: var(--ui-radius);
  background: var(--pleiad-color-011);
  color: var(--pleiad-color-012);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition:
    border-color 150ms ease,
    background 150ms ease;
}

.pleiad-feed-close:hover {
  border-color: var(--pleiad-color-013);
  background: var(--pleiad-color-014);
}

.pleiad-feed-close .ui-icon {
  width: 15px;
  height: 15px;
}

.pleiad-filter-group {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.pleiad-kind-chip {
  width: var(--pleiad-btn-size);
  height: var(--pleiad-btn-size);
  border: 1px solid var(--pleiad-color-017);
  border-radius: 999px;
  background: var(--pleiad-color-018);
  color: var(--muted);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition:
    border-color 140ms ease,
    background 140ms ease,
    color 140ms ease;
}

.pleiad-kind-chip:hover {
  border-color: var(--pleiad-color-019);
  background: var(--pleiad-color-020);
}

.pleiad-kind-chip.active {
  border-color: var(--pleiad-color-021);
  background: var(--pleiad-color-022);
  color: var(--pleiad-color-023);
}

.pleiad-kind-chip.kind-all {
  color: var(--pleiad-color-024);
}

.pleiad-kind-chip.kind-action {
  color: var(--pleiad-color-025);
}

.pleiad-kind-chip.kind-action.active {
  border-color: var(--pleiad-color-026);
  background: var(--pleiad-color-027);
}

.pleiad-kind-chip.kind-warning {
  color: var(--pleiad-color-028);
}

.pleiad-kind-chip.kind-warning.active {
  border-color: var(--pleiad-color-029);
  background: var(--pleiad-color-030);
}

.pleiad-kind-chip.kind-memory {
  color: var(--pleiad-color-031);
}

.pleiad-kind-chip.kind-memory.active {
  border-color: var(--pleiad-color-032);
  background: var(--pleiad-color-033);
}

.pleiad-kind-chip.kind-info {
  color: var(--pleiad-color-034);
}

.pleiad-kind-chip.kind-info.active {
  border-color: var(--pleiad-color-035);
  background: var(--pleiad-color-036);
}

.pleiad-kind-icon {
  width: 15px;
  height: 15px;
}

.pleiad-feed-list {
  min-height: 0;
  overflow-y: auto;
  padding: 8px;
  display: grid;
  align-content: start;
  gap: 8px;
}

.pleiad-event-item {
  border: 1px solid var(--pleiad-color-037);
  border-radius: var(--ui-radius);
  padding: 9px;
  text-align: left;
  background: var(--pleiad-color-038);
  color: var(--pleiad-color-039);
  cursor: pointer;
  transition:
    border-color 140ms ease,
    background 140ms ease,
    box-shadow 180ms ease;
}

.pleiad-event-item:hover {
  border-color: var(--pleiad-color-040);
  background: var(--pleiad-color-041);
}

.pleiad-event-item.active {
  border-color: var(--pleiad-color-042);
  box-shadow:
    0 10px 22px var(--pleiad-color-043),
    0 0 0 1px var(--pleiad-color-044);
  background: var(--pleiad-color-045);
}

.pleiad-event-item.kind-warning {
  border-left-color: var(--pleiad-color-046);
}

.pleiad-event-item.kind-action {
  border-left-color: var(--pleiad-color-047);
}

.pleiad-event-item.kind-memory {
  border-left-color: var(--pleiad-color-048);
}

.pleiad-event-item.kind-info {
  border-left-color: var(--pleiad-color-049);
}

.pleiad-event-line {
  display: flex;
  justify-content: space-between;
  gap: 8px;
  align-items: center;
}

.pleiad-route {
  font-size: 0.78rem;
  letter-spacing: 0.04em;
  color: var(--pleiad-color-039);
}

.pleiad-kind {
  font-size: 0.66rem;
  letter-spacing: 0.07em;
  text-transform: uppercase;
  color: var(--muted);
}

.pleiad-summary {
  margin: 7px 0 0;
  font-size: 0.79rem;
  line-height: 1.4;
  color: var(--pleiad-color-039);
}

.pleiad-event-meta {
  margin-top: 8px;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  font-size: 0.67rem;
  color: var(--muted);
}

.pleiad-feed-empty {
  margin: 10px 4px;
  color: var(--muted);
  font-size: 0.8rem;
}

.pleiad-tooltip {
  position: fixed;
  z-index: 66;
  display: grid;
  gap: 2px;
  padding: 8px 10px;
  border-radius: var(--ui-radius);
  border: 1px solid var(--border);
  background: linear-gradient(162deg, var(--surface-strong), var(--surface));
  pointer-events: none;
  box-shadow: 0 16px 34px var(--pleiad-color-050);
}

.pleiad-tooltip strong {
  font-size: 0.77rem;
  letter-spacing: 0.06em;
}

.pleiad-tooltip span {
  font-size: 0.73rem;
  color: var(--muted);
}

.pleiad-tooltip small {
  margin-top: 2px;
  font-size: 0.64rem;
  color: var(--muted);
}

.pleiad-root.pleiad-root--screensaver .pleiad-top-actions {
  top: 10px;
  right: 10px;
}

.pleiad-root.pleiad-root--screensaver .pleiad-pin-banner {
  top: 10px;
  left: 10px;
}

.pleiad-root.pleiad-root--screensaver .pleiad-feed-panel {
  top: 62px;
  right: 10px;
  bottom: 70px;
}

.pleiad-root.pleiad-root--screensaver .pleiad-feed-toggle {
  right: 10px;
  bottom: 10px;
}

@include bp.down(bp.$bp-lg) {
  .pleiad-feed-panel {
    width: min(360px, calc(100% - 20px));
  }
}

@include bp.down(bp.$bp-sm) {
  .pleiad-root {
    padding-top: 0;
    height: 100dvh;
  }

  .pleiad-layout {
    height: 100dvh;
  }

  .pleiad-top-actions {
    top: 10px;
    right: 10px;
  }

  .pleiad-pin-banner {
    top: 10px;
    left: 10px;
    max-width: calc(100% - 132px);
  }

  .pleiad-feed-panel {
    top: auto;
    right: 10px;
    left: 10px;
    bottom: 64px;
    width: auto;
    max-height: min(56vh, 420px);
    transform: translateY(110%);
    border-radius: var(--ui-radius);
  }

  .pleiad-feed-panel.open {
    transform: translateY(0);
  }

  .pleiad-feed-toggle {
    right: 10px;
    bottom: 10px;
  }
}
